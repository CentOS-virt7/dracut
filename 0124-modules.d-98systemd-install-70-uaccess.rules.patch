From 7c9d4fb765fc45da2b17ccaca062f0f8a73c4c1e Mon Sep 17 00:00:00 2001
From: Fedora dracut team <dracut-maint@redhat.com>
Date: Mon, 24 Feb 2014 13:01:53 -0500
Subject: [PATCH] modules.d/98systemd: install 70-uaccess.rules

Plymouth needs it to show splash from initrd.

https://bugzilla.redhat.com/show_bug.cgi?id=1015564
---
 modules.d/98systemd/module-setup.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules.d/98systemd/module-setup.sh b/modules.d/98systemd/module-setup.sh
index 91a6559..afe3dda 100755
--- a/modules.d/98systemd/module-setup.sh
+++ b/modules.d/98systemd/module-setup.sh
@@ -160,61 +160,61 @@ install() {
     fi
 
     # install adm user/group for journald
     inst_multiple nologin
     egrep '^systemd-journal:' "$initdir/etc/passwd" 2>/dev/null >> "$initdir/etc/passwd"
     egrep '^systemd-journal:' /etc/group >> "$initdir/etc/group"
 
     ln_r $systemdutildir/systemd "/init"
     ln_r $systemdutildir/systemd "/sbin/init"
 
     inst_script "$moddir/dracut-emergency.sh" /bin/dracut-emergency
     inst_simple "$moddir/emergency.service" ${systemdsystemunitdir}/emergency.service
     inst_simple "$moddir/dracut-emergency.service" ${systemdsystemunitdir}/dracut-emergency.service
     inst_simple "$moddir/emergency.service" ${systemdsystemunitdir}/rescue.service
 
     ln_r "${systemdsystemunitdir}/initrd.target" "${systemdsystemunitdir}/default.target"
 
     inst_script "$moddir/dracut-cmdline.sh" /bin/dracut-cmdline
     inst_script "$moddir/dracut-pre-udev.sh" /bin/dracut-pre-udev
     inst_script "$moddir/dracut-pre-trigger.sh" /bin/dracut-pre-trigger
     inst_script "$moddir/dracut-initqueue.sh" /bin/dracut-initqueue
     inst_script "$moddir/dracut-pre-mount.sh" /bin/dracut-pre-mount
     inst_script "$moddir/dracut-mount.sh" /bin/dracut-mount
     inst_script "$moddir/dracut-pre-pivot.sh" /bin/dracut-pre-pivot
 
     inst_script "$moddir/rootfs-generator.sh" /lib/systemd/system-generators/dracut-rootfs-generator
 
     inst_binary true
     ln_r $(type -P true) "/usr/bin/loginctl"
     ln_r $(type -P true) "/bin/loginctl"
-    inst_rules 71-seat.rules 73-seat-late.rules 99-systemd.rules
+    inst_rules 70-uaccess.rules 71-seat.rules 73-seat-late.rules 99-systemd.rules
 
     for i in \
         emergency.target \
         dracut-emergency.service \
         rescue.service \
         systemd-ask-password-console.service \
         systemd-ask-password-plymouth.service \
         ; do
         mkdir -p "${initdir}${systemdsystemunitdir}/${i}.wants"
         ln_r "${systemdsystemunitdir}/systemd-vconsole-setup.service" \
             "${systemdsystemunitdir}/${i}.wants/systemd-vconsole-setup.service"
     done
 
     mkdir -p "${initdir}/$systemdsystemunitdir/initrd.target.wants"
     for i in \
         dracut-cmdline.service \
         dracut-initqueue.service \
         dracut-mount.service \
         dracut-pre-mount.service \
         dracut-pre-pivot.service \
         dracut-pre-trigger.service \
         dracut-pre-udev.service \
         ; do
         inst_simple "$moddir/${i}" "$systemdsystemunitdir/${i}"
         ln_r "$systemdsystemunitdir/${i}" "$systemdsystemunitdir/initrd.target.wants/${i}"
     done
 
     mkdir -p "$initdir/etc/systemd"
     # turn off RateLimit for journal
     {
-- 
1.8.4.2


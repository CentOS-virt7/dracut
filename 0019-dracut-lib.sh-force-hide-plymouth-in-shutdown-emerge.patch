From 6925885e80b1beade7f2ebc9d3475c2d04c9810d Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 18 Jan 2013 11:00:00 +0100
Subject: [PATCH] dracut-lib.sh: force hide plymouth in shutdown emergency
 shell

---
 modules.d/99base/dracut-lib.sh | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/modules.d/99base/dracut-lib.sh b/modules.d/99base/dracut-lib.sh
index 313f414..4094f70 100755
--- a/modules.d/99base/dracut-lib.sh
+++ b/modules.d/99base/dracut-lib.sh
@@ -909,6 +909,11 @@ emergency_shell()
         shift 2
     elif [ "$1" = "--shutdown" ]; then
         _rdshell_name=$2; action="Shutdown"; hook="shutdown-emergency"
+        if [ -x /bin/plymouth ]; then
+            /bin/plymouth --hide-splash
+        elif [ -x /oldroot/bin/plymouth ]; then
+            /oldroot/bin/plymouth --hide-splash
+        fi
         shift 2
     fi
 

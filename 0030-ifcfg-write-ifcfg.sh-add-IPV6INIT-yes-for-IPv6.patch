From 32ec0a762d1dce36f20857ffd222863a3d550ed7 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 6 Sep 2012 11:38:48 +0200
Subject: [PATCH] ifcfg/write-ifcfg.sh: add "IPV6INIT=yes" for IPv6

https://bugzilla.redhat.com/show_bug.cgi?id=852808
---
 modules.d/45ifcfg/write-ifcfg.sh | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/modules.d/45ifcfg/write-ifcfg.sh b/modules.d/45ifcfg/write-ifcfg.sh
index b62170d..8cc3796 100755
--- a/modules.d/45ifcfg/write-ifcfg.sh
+++ b/modules.d/45ifcfg/write-ifcfg.sh
@@ -105,6 +105,7 @@ for netif in $IFACES ; do
         [ -n "$mtu" ] && echo "MTU=$mtu"
         if [ -f /tmp/net.$netif.lease ]; then
             strstr "$ip" '*:*:*' &&
+            echo "IPV6INIT=yes"
             echo "DHCPV6C=yes"
             echo "BOOTPROTO=dhcp"
             cp /tmp/net.$netif.lease /tmp/ifcfg-leases/dhclient-$uuid-$netif.lease
@@ -112,6 +113,7 @@ for netif in $IFACES ; do
             # If we've booted with static ip= lines, the override file is there
             [ -e /tmp/net.$netif.override ] && . /tmp/net.$netif.override
             if strstr "$ip" '*:*:*'; then
+                echo "IPV6INIT=yes"
                 echo "IPV6_AUTOCONF=no"
                 echo "IPV6ADDR=$ip/$mask"
             else

From bc97e005fa097b9b8111ab0ec19bd4e246c13f9b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Dan=20Hor=C3=A1k?= <dan@danny.cz>
Date: Wed, 29 May 2013 11:26:56 +0200
Subject: [PATCH] use system provides udev rule and initialization script

---
 modules.d/95zfcp/56-zfcp.rules |  1 -
 modules.d/95zfcp/zfcpconf.sh   | 57 ------------------------------------------
 2 files changed, 58 deletions(-)
 delete mode 100644 modules.d/95zfcp/56-zfcp.rules
 delete mode 100755 modules.d/95zfcp/zfcpconf.sh

diff --git a/modules.d/95zfcp/56-zfcp.rules b/modules.d/95zfcp/56-zfcp.rules
deleted file mode 100644
index 5558f8b..0000000
--- a/modules.d/95zfcp/56-zfcp.rules
+++ /dev/null
@@ -1 +0,0 @@
-KERNEL=="zfcp", RUN+="/sbin/zfcpconf.sh"
diff --git a/modules.d/95zfcp/zfcpconf.sh b/modules.d/95zfcp/zfcpconf.sh
deleted file mode 100755
index 7127eae..0000000
--- a/modules.d/95zfcp/zfcpconf.sh
+++ /dev/null
@@ -1,57 +0,0 @@
-#!/bin/sh
-# -*- mode: shell-script; indent-tabs-mode: nil; sh-basic-offset: 4; -*-
-# ex: ts=8 sw=4 sts=4 et filetype=sh
-
-# config file syntax:
-# deviceno   WWPN   FCPLUN
-#
-# Example:
-# 0.0.4000 0x5005076300C213e9 0x5022000000000000
-# 0.0.4001 0x5005076300c213e9 0x5023000000000000
-#
-#
-# manual setup:
-# modprobe zfcp
-# echo 1    > /sys/bus/ccw/drivers/zfcp/0.0.4000/online
-# echo LUN  > /sys/bus/ccw/drivers/zfcp/0.0.4000/WWPN/unit_add
-#
-# Example:
-# modprobe zfcp
-# echo 1                  > /sys/bus/ccw/drivers/zfcp/0.0.4000/online
-# echo 0x5022000000000000 > /sys/bus/ccw/drivers/zfcp/0.0.4000/0x5005076300c213e9/unit_add
-
-CONFIG=/etc/zfcp.conf
-PATH=/usr/sbin:/usr/bin:/sbin:/bin
-
-if [ -f "$CONFIG" ]; then
-    if [ ! -d /sys/bus/ccw/drivers/zfcp ]; then
-        modprobe zfcp
-    fi
-    if [ ! -d /sys/bus/ccw/drivers/zfcp ]; then
-        return
-    fi
-    sed 'y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/' < $CONFIG| while read line; do
-    case $line in
-        \#*) ;;
-        *)
-            [ -z "$line" ] && continue
-            set $line
-            if [ $# -eq 5 ]; then
-                DEVICE=$1
-                SCSIID=$2
-                WWPN=$3
-                SCSILUN=$4
-                FCPLUN=$5
-                echo "Warning: Deprecated values in /etc/zfcp.conf, ignoring SCSI ID $SCSIID and SCSI LUN $SCSILUN"
-            elif [ $# -eq 3 ]; then
-                DEVICE=${1##*0x}
-                WWPN=$2
-                FCPLUN=$3
-            fi
-            echo 1 > /sys/bus/ccw/drivers/zfcp/${DEVICE}/online
-            [ ! -d /sys/bus/ccw/drivers/zfcp/${DEVICE}/${WWPN}/${FCPLUN} ] \
-                && echo $FCPLUN > /sys/bus/ccw/drivers/zfcp/${DEVICE}/${WWPN}/unit_add
-            ;;
-    esac
-    done
-fi

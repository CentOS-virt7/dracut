From 65ceb56dd593f319fb15e12efe404e66ed641909 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Mon, 7 May 2012 16:28:16 +0200
Subject: [PATCH] plymouth/plymouth-pretrigger.sh: check for tty dev existence

---
 modules.d/50plymouth/plymouth-pretrigger.sh |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules.d/50plymouth/plymouth-pretrigger.sh b/modules.d/50plymouth/plymouth-pretrigger.sh
index 50828af..8fa0aec 100755
--- a/modules.d/50plymouth/plymouth-pretrigger.sh
+++ b/modules.d/50plymouth/plymouth-pretrigger.sh
@@ -21,10 +21,10 @@ if [ -x /bin/plymouthd ]; then
         mkdir -m 0755 /run/plymouth
         consoledev=$(getarg console= | sed -e 's/,.*//')
         consoledev=${consoledev:-tty0}
-        [ -x /lib/udev/console_init ] && /lib/udev/console_init "/dev/$consoledev"
+        [ -x /lib/udev/console_init -a -e "/dev/$consoledev" ] && /lib/udev/console_init "/dev/$consoledev"
         [ -x /bin/plymouthd ] && /bin/plymouthd --attach-to-session --pid-file /run/plymouth/pid
         /bin/plymouth --show-splash 2>&1 | vinfo
         # reset tty after plymouth messed with it
-        [ -x /lib/udev/console_init ] && /lib/udev/console_init /dev/tty0
+        [ -x /lib/udev/console_init -a -e "/dev/$consoledev" ] && /lib/udev/console_init "/dev/$consoledev"
     fi
 fi
